<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Query and manipulate the Windows Credential Store — windows_credentials • oskeyring</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Query and manipulate the Windows Credential Store — windows_credentials"><meta name="description" content="windows_item_* functions read, write, delete and list
credentials."><meta property="og:description" content="windows_item_* functions read, write, delete and list
credentials."><meta name="robots" content="noindex"><script defer data-domain="r-lib.github.io/oskeyring,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oskeyring</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.6.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/oskeyring/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Query and manipulate the Windows Credential Store</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/oskeyring/blob/main/R/windows.R" class="external-link"><code>R/windows.R</code></a></small>
      <div class="d-none name"><code>windows_credentials.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>windows_item_*</code> functions read, write, delete and list
credentials.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">windows_item_types</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">windows_item</span><span class="op">(</span></span>
<span>  <span class="va">credential_blob</span>,</span>
<span>  <span class="va">target_name</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"generic"</span>,</span>
<span>  comment <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  persist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"local_machine"</span>, <span class="st">"session"</span>, <span class="st">"enterprise"</span><span class="op">)</span>,</span>
<span>  attributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  target_alias <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  username <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">windows_item_read</span><span class="op">(</span><span class="va">target_name</span>, type <span class="op">=</span> <span class="st">"generic"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">windows_item_write</span><span class="op">(</span><span class="va">item</span>, preserve <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">windows_item_delete</span><span class="op">(</span><span class="va">target_name</span>, type <span class="op">=</span> <span class="st">"generic"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">windows_item_enumerate</span><span class="op">(</span>filter <span class="op">=</span> <span class="cn">NULL</span>, all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-credential-blob">credential_blob<a class="anchor" aria-label="anchor" href="#arg-credential-blob"></a></dt>
<dd><p>The secret credential, a password,
certificate or key. See also
<a href="https://learn.microsoft.com/en-us/windows/win32/api/wincred/" class="external-link">https://learn.microsoft.com/en-us/windows/win32/api/wincred/</a>
This can be a raw vector, or a string. If it is a string, then it
will be converted to Unicode, without the terminating zero.
It can also be <code>NULL</code>, to be used with the <code>preserve = TRUE</code>
argument of <code>windows_item_write()</code>.</p></dd>


<dt id="arg-target-name">target_name<a class="anchor" aria-label="anchor" href="#arg-target-name"></a></dt>
<dd><p>The name of the credential. The <code>target_name</code>
and <code>type</code> members uniquely identify the credential. This member
cannot be changed after the credential is created. Instead, the
credential with the old name should be deleted and the credential
with the new name created. This member cannot be longer than
<code>CRED_MAX_GENERIC_TARGET_NAME_LENGTH</code> (32767) characters.
This member is case-insensitive.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>The type of the credential. This member cannot be
changed after the credential is created. See <code>windows_item_types()</code>
for possible values.</p></dd>


<dt id="arg-comment">comment<a class="anchor" aria-label="anchor" href="#arg-comment"></a></dt>
<dd><p>If not <code>NULL</code>, then a string comment from the user
that describes this credential. This member cannot be longer than
<code>CRED_MAX_STRING_LENGTH</code> (256) characters. It is stored as a Unicode
string.</p></dd>


<dt id="arg-persist">persist<a class="anchor" aria-label="anchor" href="#arg-persist"></a></dt>
<dd><p>Defines the persistence of this credential.</p><ul><li><p><code>"local_machine"</code>: The credential persists for all subsequent
logon sessions on this same computer. It is visible to other
logon sessions of this same user on this same computer and not
visible to logon sessions for this user on other computers.</p></li>
<li><p><code>"session"</code>: The credential persists for the life of the logon
session. It will not be visible to other logon sessions of this
same user. It will not exist after this user logs off and back on.</p></li>
<li><p><code>"enterprise"</code>: The credential persists for all subsequent logon
sessions on this same computer. It is visible to other logon
sessions of this same user on this same computer and to logon
sessions for this user on other computers.</p></li>
</ul></dd>


<dt id="arg-attributes">attributes<a class="anchor" aria-label="anchor" href="#arg-attributes"></a></dt>
<dd><p>Application-defined attributes that are
associated with the credential. This is <code>NULL</code> or a named list
of raw or string vectors. String vectors are converted to
Unicode, without the terminating zero. A credential can have at
most 64 attributes, the names of the attributes cannot be
longer than <code>CRED_MAX_STRING_LENGTH</code> (256) characters each, and
the attributes themselves cannot be longer than
<code>CRED_MAX_VALUE_SIZE</code> (256) bytes.</p></dd>


<dt id="arg-target-alias">target_alias<a class="anchor" aria-label="anchor" href="#arg-target-alias"></a></dt>
<dd><p>Alias for the <code>target_name</code> member.
This member can be read and written. It cannot be longer than
<code>CRED_MAX_STRING_LENGTH</code> (256) characters. It is stored in Unicode.</p></dd>


<dt id="arg-username">username<a class="anchor" aria-label="anchor" href="#arg-username"></a></dt>
<dd><p><code>NULL</code> or the user name of the account used to
connect to <code>target_name</code>.</p></dd>


<dt id="arg-item">item<a class="anchor" aria-label="anchor" href="#arg-item"></a></dt>
<dd><p><code>oskeyring_windows_item</code> object to write.</p></dd>


<dt id="arg-preserve">preserve<a class="anchor" aria-label="anchor" href="#arg-preserve"></a></dt>
<dd><p>The credential BLOB from an existing credential
is preserved with the same credential name and credential type.
The <code>credential_blob</code> of the passed <code>oskeyring_windows_item</code>
object must be <code>NULL</code>.</p></dd>


<dt id="arg-filter">filter<a class="anchor" aria-label="anchor" href="#arg-filter"></a></dt>
<dd><p>If not <code>NULL</code>, then a string to filter the
credentials. Only credentials with a <code>target_name</code> matching the
filter will be returned. The filter specifies a name prefix
followed by an asterisk. For instance, the filter <code>"FRED*"</code> will
return all credentials with a <code>target_name</code> beginning with the
string <code>"FRED"</code>.</p></dd>


<dt id="arg-all">all<a class="anchor" aria-label="anchor" href="#arg-all"></a></dt>
<dd><p>Whether to use the <code>CRED_ENUMERATE_ALL_CREDENTIALS</code>
flag to enumerate all credentials. If this is <code>TRUE</code>, then <code>filter</code>
must be <code>NULL</code>. If this is <code>TRUE</code>, then the target name of each
credential is returned in the <code>"namespace:attribute=target</code>" format.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>windows_item_types()</code> returns a character vector, the
currently supported credential types.</p>
<p><code>windows_item()</code> returns an <code>oskeyring_windows_item</code>
object.</p>
<p><code>windows_item_read()</code> returns an <code>oskeyring_windows_item</code>
object.</p>
<p><code>windows_item_write()</code> returns <code>NULL</code>, invisibly.</p>
<p><code>windows_item_delete()</code> returns <code>NULL</code>, invisibly.</p>
<p><code>windows_item_enumerate()</code> returns a list of
<code>oskeyring_windows_item</code> items.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="windows-item-types-"><code>windows_item_types()</code><a class="anchor" aria-label="anchor" href="#windows-item-types-"></a></h3>


<p><code>windows_item_types()</code> lists the currently supported credential
types.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/windows_credentials.html">windows_item_types</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "generic"                 "domain_password"</span></span>
<span><span class="co">#&gt; [3] "domain_certificate"      "domain_visible_password"</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="windows-item-"><code>windows_item()</code><a class="anchor" aria-label="anchor" href="#windows-item-"></a></h3>


<p><code>windows_item()</code> creates a Windows credential, that can be
then added to the credential store.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">it</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/windows_credentials.html">windows_item</a></span><span class="op">(</span><span class="st">"secret"</span>, <span class="st">"my-host-password"</span><span class="op">)</span></span>
<span><span class="va">it</span></span>
<span><span class="co">#&gt; &lt;oskeyring_windows_item: generic&gt;</span></span>
<span><span class="co">#&gt;  target_name: my-host-password</span></span>
<span><span class="co">#&gt;  persist: local_machine</span></span>
<span><span class="co">#&gt;  credential_blob: &lt;-- hidden --&gt;</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="windows-item-write-"><code>windows_item_write()</code><a class="anchor" aria-label="anchor" href="#windows-item-write-"></a></h3>


<p>Writes an item to the credential store.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/windows_credentials.html">windows_item_write</a></span><span class="op">(</span><span class="va">it</span><span class="op">)</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="windows-item-read-"><code>windows_item_read()</code><a class="anchor" aria-label="anchor" href="#windows-item-read-"></a></h3>


<p>Reads a credential with the specified type and <code>target_name</code>.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/windows_credentials.html">windows_item_read</a></span><span class="op">(</span><span class="st">"my-host-password"</span><span class="op">)</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="windows-item-enumerate-"><code>windows_item_enumerate()</code><a class="anchor" aria-label="anchor" href="#windows-item-enumerate-"></a></h3>


<p>List all credentials that match a prefix.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/windows_credentials.html">windows_item_enumerate</a></span><span class="op">(</span>filter <span class="op">=</span> <span class="st">"my-*"</span><span class="op">)</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="windows-item-delete-"><code>windows_item_delete()</code><a class="anchor" aria-label="anchor" href="#windows-item-delete-"></a></h3>


<p>Delete a credential:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/windows_credentials.html">windows_item_delete</a></span><span class="op">(</span><span class="st">"my-host-password"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/windows_credentials.html">windows_item_enumerate</a></span><span class="op">(</span>filter <span class="op">=</span> <span class="st">"my-*"</span><span class="op">)</span></span></code></pre><p></p></div>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>The API documentation at
<a href="https://learn.microsoft.com/en-us/windows/win32/api/wincred/" class="external-link">https://learn.microsoft.com/en-us/windows/win32/api/wincred/</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># See above</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

  </div></footer></body></html>

